{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/promise_","result":{"data":{"markdownRemark":{"id":"6ecdce61-e370-55fc-9b47-c06091b729c0","html":"<h3 id=\"콜백-함수의-단점--콜백지옥이-생긴다\"><a href=\"#%EC%BD%9C%EB%B0%B1-%ED%95%A8%EC%88%98%EC%9D%98-%EB%8B%A8%EC%A0%90--%EC%BD%9C%EB%B0%B1%EC%A7%80%EC%98%A5%EC%9D%B4-%EC%83%9D%EA%B8%B4%EB%8B%A4\" aria-label=\"콜백 함수의 단점  콜백지옥이 생긴다 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>콜백 함수의 단점 : 콜백지옥이 생긴다.</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 721px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7e4b51c526994565ce722498f17f0178/f6c57/hell.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.25242718446603%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAEDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAeZnIAf/xAAWEAEBAQAAAAAAAAAAAAAAAAABESD/2gAIAQEAAQUCSa//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAWEAEBAQAAAAAAAAAAAAAAAAARASD/2gAIAQEABj8CKa//xAAZEAACAwEAAAAAAAAAAAAAAAABEAARUWH/2gAIAQEAAT8h1rhhpF//2gAMAwEAAgADAAAAENPP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGhAAAQUBAAAAAAAAAAAAAAAAAQAQESExgf/aAAgBAQABPxDawVpCGNEcYiTZx//Z'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/7e4b51c526994565ce722498f17f0178/8ac56/hell.webp 240w,\n/static/7e4b51c526994565ce722498f17f0178/d3be9/hell.webp 480w,\n/static/7e4b51c526994565ce722498f17f0178/c71bf/hell.webp 721w\"\n          sizes=\"(max-width: 721px) 100vw, 721px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/7e4b51c526994565ce722498f17f0178/5a194/hell.jpg 240w,\n/static/7e4b51c526994565ce722498f17f0178/8a430/hell.jpg 480w,\n/static/7e4b51c526994565ce722498f17f0178/f6c57/hell.jpg 721w\"\n          sizes=\"(max-width: 721px) 100vw, 721px\"\n          type=\"image/jpeg\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/7e4b51c526994565ce722498f17f0178/f6c57/hell.jpg\"\n          alt=\"hell\"\n          title=\"hell\"\n          loading=\"lazy\"\n        />\n      </picture>\n  </a>\n    </span></p>\n<p><strong>벗어나기 위해서 사용되는 것</strong> : <code class=\"language-text\">new Promise</code> 혹은 <code class=\"language-text\">await/async</code></p>\n<p>둘 다 <code class=\"language-text\">Promise</code>를 return 한다는 점에서 역할이 비슷하다.\n<code class=\"language-text\">Promise</code>는 이전 포스팅에서 간략히 설명을 한것이 있다.\n다시 한번 짧게 설명하면 <code class=\"language-text\">Promise</code>는 <code class=\"language-text\">resolve</code> 와 <code class=\"language-text\">reject</code>를 만들 수 있다.\n<code class=\"language-text\">Promise</code>를 사용하려면 함수 내에 명시적으로</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">    function example(){\n         return new Promise((resolve, reject)=&gt;{\n\n       })\n    }</code></pre></div>\n<p><code class=\"language-text\">new Promise</code> 선언을 하고 <code class=\"language-text\">resolve</code>,<code class=\"language-text\">reject</code>를 만들어서 <code class=\"language-text\">.then()</code> 혹은 <code class=\"language-text\">.catch()</code>로 다음 작업을 실행할 수 있게 했다.</p>\n<p><strong>이제 Await/Async 를 보자.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">    function myFunc(){\n      return &#39;func&#39;\n    }\n\n    async function myAsync(){\n      return &#39;async&#39;\n    }</code></pre></div>\n<p>이 두가지 함수를 F12를 누른뒤 콘솔창에 입력한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">    console.log(myFunc())\n    console.log(myAsync())</code></pre></div>\n<p>콘솔을 입력하여 확인해본다.</p>\n<p>결과는 어떻게 나왔는가 ??</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">    func\n    Promise {&lt;resolved&gt;}: &#39;async&#39;}</code></pre></div>\n<p>라고 나왔다.</p>\n<p><code class=\"language-text\">Myasync</code> 는 결과값으로 <code class=\"language-text\">Promise</code>를 return 한다는것을 알 수 있다.</p>\n<p><strong>그래서 async는 뭐냐 ??</strong> 바로 <code class=\"language-text\">Promise</code>를 return 하는 함수로 만들어준다는 것.</p>\n<p><strong><code class=\"language-text\">Promise</code> 를 return 한다는 것은 <code class=\"language-text\">.then</code> 을 쓸 수 있다는 것이다.</strong></p>\n<p><code class=\"language-text\">myAsync</code> 를 호출하면 <code class=\"language-text\">Promise</code> 를 return 하니까, <code class=\"language-text\">.then</code> 을 사용할 수 있다.!!(<code class=\"language-text\">Promise</code>에서도 <code class=\"language-text\">then</code>을 통해 <code class=\"language-text\">resolve</code>를 가져온것과 같이)\n<del>자꾸 같은말 반복하네요</del></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">    myAsync().then((result)=&gt;{\n            console.log(&quot;결과&quot;,result)\n    })</code></pre></div>\n<p>를 입력하면 어떻게 될까 ???</p>\n<p><code class=\"language-text\">myAsync()</code> 의 결과값(return값)인 <code class=\"language-text\">async</code>가 <code class=\"language-text\">.then</code>의 <code class=\"language-text\">result</code>로 들어간다.\n그리고 <code class=\"language-text\">console.log(&quot;결과&quot;,result)</code>에서 사용된다.\n<img src=\"&#x27;/media/Etc/Promise/promise6.png&#x27;\">\n<del>(비동기에서 에러를 다루는 것은 이부분에서 다루지 않는다.)</del></p>\n<h4 id=\"이제-async의-짝인-await을-알아보자\"><a href=\"#%EC%9D%B4%EC%A0%9C-async%EC%9D%98-%EC%A7%9D%EC%9D%B8-await%EC%9D%84-%EC%95%8C%EC%95%84%EB%B3%B4%EC%9E%90\" aria-label=\"이제 async의 짝인 await을 알아보자 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이제 <code class=\"language-text\">Async</code>의 짝인 <code class=\"language-text\">await</code>을 알아보자.</h4>\n<p><code class=\"language-text\">await</code>은 이름에서도 알 수 있듯이 무언가를 기다리는 것이다.\n뭘 기다리느냐, <code class=\"language-text\">Promise</code> 를 return 하는 함수의 <code class=\"language-text\">resolove</code>값을 받아오기를 기다린다!!</p>\n<p>무슨말인지 내가 이해했던 코드를 보면서 설명하자면 ..</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">    1  function delayP(sec){\n    2     return new Promise((reslove,reject)=&gt;{\n    3        setTimeout(()=&gt;{\n    4             resolve(new Date().toISOString());\n    5       }, sec*1000)\n    6     })\n    7  }\n\n    8  async function myAsync(){\n    9     await delayP(3);\n    10     return &#39;async&#39;\n    11  }\n\n    12  myAsync().then((result)=&gt;{\n    13     console.log(result)\n    14  })</code></pre></div>\n<p>line 9의 <code class=\"language-text\">await dealyP(3)</code>를 보면서 해석하면,\n<code class=\"language-text\">delayP(3)</code>이 <code class=\"language-text\">resolve</code>될 때 까지 기다겠다는 것이다.\n<strong><code class=\"language-text\">await</code>은 <code class=\"language-text\">Promise</code> 객체를 반환하는 method를 사용할 수도 있고, <code class=\"language-text\">일반 함수</code>를 넣어도 사용할 수 있다.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">    function normal(){\n       return &#39;일반함수&#39;\n    }</code></pre></div>\n<p>이런 일반 함수도 await에 사용할 수 있다.</p>\n<p><code class=\"language-text\">await</code>에서 <code class=\"language-text\">delayP(3)</code>의 <code class=\"language-text\">resolve</code> 값을 기다린 뒤에 <code class=\"language-text\">return &#39;async&#39;</code>를 진행하겠다 라는 의미가 된다…</p>\n<p><strong>정리</strong> :</p>\n<ol>\n<li><code class=\"language-text\">async</code>은 일반함수 쓰듯이 작성을 하고 앞에 <code class=\"language-text\">async</code>를 붙여서 사용한다. 그 함수의 결과값 즉, <code class=\"language-text\">return</code> 값이 <code class=\"language-text\">Promise</code>의 <code class=\"language-text\">resolve</code>값이 된다!!</li>\n<li><code class=\"language-text\">await</code>는 <code class=\"language-text\">await</code>이 쓰여진 함수가 처리될 때 까지 기다린다는 것.\n근데 만약 <code class=\"language-text\">await</code>이 쓰여진 함수가 <code class=\"language-text\">Promise</code>라면 <code class=\"language-text\">resolve</code>가 될 때까지 기다리고, 일반함수라면 <code class=\"language-text\">return</code> 되기를 기다린다는 것.</li>\n</ol>\n<blockquote>\n<p>코드를 짜기 쉽게, 우리가 생각하는 로직을 표현하는것에 Promise 를 사용하는게 편할 수 있고, await/async 를 사용하는게 편할 수 있다.</p>\n</blockquote>\n<p><strong>이곳에서 많은 도움을 받았습니다.</strong>\n<a href=\"https://www.youtube.com/watch?v=JzXjB6L99N4&#x26;t=16s\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://www.youtube.com/watch?v=JzXjB6L99N4&#x26;t=16s</a></p>","fields":{"slug":"/posts/promise_","tagSlugs":null},"frontmatter":{"date":"2019-12-08T12:03:32.169Z","description":"await/async","tags":null,"title":"콜백지옥을 벗어나자","socialImage":"/media/javascript_logo.png"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/posts/promise_"}}}